{"version":3,"file":"calculator.js","sourceRoot":"","sources":["calculator.ts"],"names":[],"mappings":";;;;;;AAAA,OAAO,EACL,UAAU,EACV,IAAI,EACJ,GAAG,EACH,aAAa,EACb,QAAQ,GAET,MAAM,qDAAqD,CAAC;AAC7D,OAAO,yBAAyB,CAAC;AACjC,OAAO,oBAAoB,CAAC;AAC5B,OAAO,2BAA2B,CAAC;AAGnC,IAAa,aAAa,GAA1B,MAAa,aAAc,SAAQ,UAAU;IAA7C;;QAEE,UAAK,GAAG,OAAO,CAAC;QAGhB,iBAAY,GAAG,KAAK,CAAC;QAGrB,gBAAW,GAAG,OAAO,CAAC;QA8BtB,aAAQ,GAAW,EAAE,CAAC;QACtB,WAAM,GAAW,EAAE,CAAC;QACpB,UAAK,GAAW,EAAE,CAAC;QAmCnB,kBAAa,GAAG,CAAC,KAAkB,EAAE,EAAE;YACrC,MAAM,GAAG,GAAG,KAAK,CAAC,MAAM,CAAC,KAAK,CAAC;YAC/B,KAAK,CAAC,eAAe,EAAE,CAAC;YACxB,IAAI,GAAG,KAAK,GAAG,EAAE;gBACf,IAAI,CAAC,SAAS,EAAE,CAAC;gBACjB,OAAO;aACR;YACD,IAAI,IAAI,CAAC,KAAK,KAAK,GAAG,EAAE;gBACtB,IAAI,CAAC,KAAK,GAAG,EAAE,CAAC;aACjB;YACD,IAAI,GAAG,KAAK,GAAG,IAAI,IAAI,CAAC,KAAK,CAAC,QAAQ,CAAC,GAAG,CAAC,EAAE;gBAC3C,OAAO;aACR;YACD,IAAI,CAAC,KAAK,IAAI,GAAG,CAAC;QACpB,CAAC,CAAC;QAEF,WAAM,GAAG,GAAG,EAAE;YACZ,IAAI,CAAC,KAAK,GAAG,EAAE,CAAC;YAChB,IAAI,CAAC,QAAQ,GAAG,EAAE,CAAC;YACnB,IAAI,CAAC,MAAM,GAAG,EAAE,CAAC;YACjB,IAAI,CAAC,IAAI,GAAG,EAAE,CAAC;QACjB,CAAC,CAAC;QAEF,cAAS,GAAG,GAAG,EAAE;YACf,MAAM,OAAO,GAAG,MAAM,CAAC,IAAI,CAAC,QAAQ,IAAI,GAAG,CAAC,CAAC;YAC7C,MAAM,OAAO,GAAG,MAAM,CAAC,IAAI,CAAC,MAAM,IAAI,GAAG,CAAC,CAAC;YAC3C,IAAI,MAAM,GAAW,CAAC,CAAC;YACvB,YAAY;YACZ,QAAQ,IAAI,CAAC,IAAI,EAAE;gBACjB,KAAK,GAAG;oBACN,MAAM,GAAG,OAAO,GAAG,OAAO,CAAC;oBAC3B,MAAM;gBACR,KAAK,GAAG;oBACN,MAAM,GAAG,OAAO,GAAG,OAAO,CAAC;oBAC3B,MAAM;gBACR,KAAK,GAAG;oBACN,MAAM,GAAG,OAAO,GAAG,OAAO,CAAC;oBAC3B,MAAM;gBACR,KAAK,GAAG;oBACN,MAAM,GAAG,OAAO,GAAG,OAAO,CAAC;oBAC3B,MAAM;gBACR;oBACE,MAAM;aACT;YACD,MAAM,MAAM,GAAG,MAAM,CAAC,QAAQ,EAAE,CAAC;YACjC,IAAI,CAAC,KAAK,GAAG,MAAM,CAAC;YACpB,IAAI,CAAC,QAAQ,GAAG,MAAM,CAAC;QACzB,CAAC,CAAC;IA4BJ,CAAC;IA3HC,iBAAiB;QACf,KAAK,CAAC,iBAAiB,EAAE,CAAC;QAC1B,aAAa;QACb,MAAM,CAAC,gBAAgB,CAAC,eAAe,EAAE,IAAI,CAAC,aAAa,CAAC,CAAC;IAC/D,CAAC;IACD,oBAAoB;QAClB,aAAa;QACb,MAAM,CAAC,mBAAmB,CAAC,eAAe,EAAE,IAAI,CAAC,aAAa,CAAC,CAAC;QAChE,KAAK,CAAC,oBAAoB,EAAE,CAAC;IAC/B,CAAC;IAMD,IAAW,IAAI;QACb,OAAO,IAAI,CAAC,KAAK,CAAC;IACpB,CAAC;IAED,IAAW,IAAI,CAAC,CAAS;QACvB,MAAM,OAAO,GAAG,IAAI,CAAC,KAAK,CAAC;QAC3B,MAAM,MAAM,GAAG,IAAI,CAAC,KAAK,CAAC;QAC1B,IAAI,CAAC,KAAK,GAAG,CAAC,CAAC;QAEf,aAAa;QACb,IAAI,CAAC,aAAa,CAAC,MAAM,EAAE,OAAO,CAAC,CAAC;QACpC,aAAa;QACb,IAAI,CAAC,aAAa,CAAC,OAAO,EAAE,MAAM,CAAC,CAAC;IACtC,CAAC;IAED,IAAY,KAAK;QACf,IAAI,IAAI,CAAC,IAAI,IAAI,EAAE;YAAE,OAAO,IAAI,CAAC,MAAM,CAAC;QACxC,OAAO,IAAI,CAAC,QAAQ,CAAC;IACvB,CAAC;IAED,IAAY,KAAK,CAAC,CAAS;QACzB,IAAI,MAAM,GAAG,EAAE,CAAC;QAChB,IAAI,IAAI,CAAC,IAAI,IAAI,EAAE,EAAE;YACnB,MAAM,GAAG,IAAI,CAAC,MAAM,CAAC;YACrB,IAAI,CAAC,MAAM,GAAG,CAAC,CAAC;SACjB;aAAM;YACL,MAAM,GAAG,IAAI,CAAC,QAAQ,CAAC;YACvB,IAAI,CAAC,QAAQ,GAAG,CAAC,CAAC;SACnB;QACD,aAAa;QACb,IAAI,CAAC,aAAa,CAAC,OAAO,EAAE,MAAM,CAAC,CAAC;IACtC,CAAC;IAmDD,yDAAyD;IACzD,MAAM;QACJ,OAAO,IAAI,CAAA;;sBAEO,IAAI,CAAC,KAAK,uBAAuB,IAAI,CAAC,YAAY;;;iBAGvD,IAAI,CAAC,KAAK;;;;;;mBAMR,IAAI,CAAC,MAAM;sBACR,IAAI,CAAC,KAAK,KAAK,EAAE,IAAI,IAAI,CAAC,IAAI,KAAK,EAAE;;;;0BAIjC,GAAG,EAAE,CAAC,CAAC,IAAI,CAAC,IAAI,GAAG,GAAG,CAAC;0BACvB,GAAG,EAAE,CAAC,CAAC,IAAI,CAAC,IAAI,GAAG,GAAG,CAAC;0BACvB,GAAG,EAAE,CAAC,CAAC,IAAI,CAAC,IAAI,GAAG,GAAG,CAAC;0BACvB,GAAG,EAAE,CAAC,CAAC,IAAI,CAAC,IAAI,GAAG,GAAG,CAAC;;;WAGtC,CAAC;IACV,CAAC;CACF,CAAA;AA5IQ,oBAAM,GAAG,GAAG,CAAA;;;;;;;;;;;;;;;GAelB,CAAC;AAvBF;IADC,QAAQ,EAAE;4CACK;AAGhB;IADC,QAAQ,EAAE;mDACU;AAGrB;IADC,QAAQ,EAAE;kDACW;AARX,aAAa;IADzB,aAAa,CAAC,gBAAgB,CAAC;GACnB,aAAa,CAsJzB;SAtJY,aAAa","sourcesContent":["import {\n  LitElement,\n  html,\n  css,\n  customElement,\n  property,\n  // @ts-ignore\n} from \"https://unpkg.com/lit-element/lit-element.js?module\";\nimport \"./keypad-input/index.js\";\nimport \"./key-pad/index.js\";\nimport \"./display-output/index.js\";\n\n@customElement(\"app-calculator\")\nexport class AppCalculator extends LitElement {\n  @property()\n  width = \"500px\";\n\n  @property()\n  primaryColor = \"red\";\n\n  @property()\n  accentColor = \"black\";\n\n  static styles = css`\n    #base {\n      border: 2px solid black;\n      padding-bottom: 20px;\n      --base-padding: 10px;\n    }\n\n    #actions {\n      padding-top: var(--base-padding);\n      padding-left: var(--base-padding);\n    }\n\n    button {\n      font-size: 17px;\n    }\n  `;\n\n  connectedCallback() {\n    super.connectedCallback();\n    // @ts-ignore\n    window.addEventListener(\"select-number\", this._handleNumber);\n  }\n  disconnectedCallback() {\n    // @ts-ignore\n    window.removeEventListener(\"select-number\", this._handleNumber);\n    super.disconnectedCallback();\n  }\n\n  _staging: string = \"\";\n  _value: string = \"\";\n  _mode: string = \"\";\n\n  public get mode(): string {\n    return this._mode;\n  }\n\n  public set mode(v: string) {\n    const oldMode = this._mode;\n    const oldVal = this.value;\n    this._mode = v;\n\n    // @ts-ignore\n    this.requestUpdate(\"mode\", oldMode);\n    // @ts-ignore\n    this.requestUpdate(\"value\", oldVal);\n  }\n\n  private get value(): string {\n    if (this.mode == \"\") return this._value;\n    return this._staging;\n  }\n\n  private set value(v: string) {\n    var oldVal = \"\";\n    if (this.mode == \"\") {\n      oldVal = this._value;\n      this._value = v;\n    } else {\n      oldVal = this._staging;\n      this._staging = v;\n    }\n    // @ts-ignore\n    this.requestUpdate(\"value\", oldVal);\n  }\n\n  _handleNumber = (event: CustomEvent) => {\n    const num = event.detail.value;\n    event.stopPropagation();\n    if (num === \"=\") {\n      this.calculate();\n      return;\n    }\n    if (this.value === \"0\") {\n      this.value = \"\";\n    }\n    if (num === \".\" && this.value.includes(\".\")) {\n      return;\n    }\n    this.value += num;\n  };\n\n  _clear = () => {\n    this.value = \"\";\n    this._staging = \"\";\n    this._value = \"\";\n    this.mode = \"\";\n  };\n\n  calculate = () => {\n    const staging = Number(this._staging || \"0\");\n    const current = Number(this._value || \"0\");\n    var result: number = 0;\n    // Calculate\n    switch (this.mode) {\n      case \"+\":\n        result = staging + current;\n        break;\n      case \"-\":\n        result = staging - current;\n        break;\n      case \"/\":\n        result = staging / current;\n        break;\n      case \"*\":\n        result = staging * current;\n        break;\n      default:\n        break;\n    }\n    const output = result.toString();\n    this.value = output;\n    this._staging = output;\n  };\n\n  // Render element DOM by returning a `lit-html` template.\n  render() {\n    return html`<div\n      id=\"base\"\n      style=\"width: ${this.width}; background-color: ${this.primaryColor};\"\n    >\n      <display-output\n        value=\"${this.value}\"\n        color=\"black\"\n        textColor=\"white\"\n      ></display-output>\n      <div id=\"actions\">\n        <button\n          @click=${this._clear}\n          ?disabled=${this.value === \"\" && this.mode === \"\"}\n        >\n          Clear\n        </button>\n        <button @click=\"${() => (this.mode = \"+\")}\">+</button>\n        <button @click=\"${() => (this.mode = \"-\")}\">-</button>\n        <button @click=\"${() => (this.mode = \"/\")}\">/</button>\n        <button @click=\"${() => (this.mode = \"*\")}\">*</button>\n      </div>\n      <key-pad></key-pad>\n    </div>`;\n  }\n}\n"]}